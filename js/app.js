var customSearch,checkExist;function isSupportWebp(){try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(e){return!1}}function LogoChange(){"undefined"!=typeof jQuery&&(isSupportWebp()||($("section.widget.blogger> div > a > img").attr("src","https://cdn.jsdelivr.net/gh/MHuiG/blog-cdn/assets/avatar/avatar-240.png"),$("#header-meta > div > div.new-meta-item.author > a > img").attr("src","https://cdn.jsdelivr.net/gh/MHuiG/blog-cdn/assets/avatar/avatar-16.png")))}!function(r){"use strict";var s=80,c=r(".l_header",".cover-wrapper");function d(e,t){var a=1<arguments.length&&void 0!==t?t:s,o=e.href?r(e.getAttribute("href")):r(e);r("html, body").animate({scrollTop:o.offset().top-a},500)}function e(){var e=r(".menu .active"),a=r(".s-top"),t=r("h1.title","#header-meta"),o=r(".l_body");e.length&&o&&e.click(function(e){e.preventDefault(),e.stopPropagation(),d(o),e.stopImmediatePropagation()}),t.length&&o&&t.click(function(e){e.preventDefault(),e.stopPropagation(),d(o),e.stopImmediatePropagation()}),a.length&&o&&a.click(function(e){e.preventDefault(),e.stopPropagation(),d(o),e.stopImmediatePropagation()});var n=r(".cover-wrapper"),i=0;n[0]&&(i=n[0].clientHeight-180);var l=document.body.scrollTop;r(document,window).scroll(function(){var e=r(window).scrollTop(),t=e-l;180<(l=e)?(a.addClass("show"),0<t?a.removeClass("hl"):a.addClass("hl")):a.removeClass("show").removeClass("hl"),i<e?c.addClass("show"):c.removeClass("show")})}function n(){var a,e,t,o,n;"true"==r.trim(r("#pjax-ispage").text())&&(window.subData={title:r.trim(r("#pjax-pageTitle").text()),tools:!0}),window.subData&&(a=r("header .wrapper"),e=r(".s-comment",a),t=r(".s-toc",a),a.find(".nav-sub .title").text(window.subData.title),o=document.body.scrollTop,r(document,window).scroll(function(){var e=r(window).scrollTop(),t=e-o;50<=t&&100<e?(o=e,a.addClass("sub")):t<=-50&&(o=e,a.removeClass("sub"))}),r(".l_body .comments").length&&e.click(function(e){e.preventDefault(),e.stopPropagation(),d(r(".l_body .comments")),e.stopImmediatePropagation()}),(n=r(".l_body .toc-wrapper")).length&&n.children().length?(t.click(function(e){e.stopPropagation(),n.toggleClass("active"),t.toggleClass("active")}),r(document).click(function(e){e.stopPropagation(),n.removeClass("active"),t.removeClass("active")}),r(document,window).scroll(function(){n.removeClass("active"),t.removeClass("active")})):t.remove())}function i(){var e=r("body .navigation");e.find("li a.active").removeClass("active");var t=null,a=location.pathname.replace(/\/|%|\./g,"");0==a.length&&(a="home");var o=a.match(/page\d{0,}$/g);o&&(o=o[0],a=a.split(o)[0]);var n,i=a.match(/index.html/);i&&(i=i[0],a=a.split(i)[0]),a&&e&&(t=r("#"+a,e),(n=t)&&n.length&&n.addClass("active").siblings().removeClass("active"))}function l(){var n,i,l,c,e,t,a=r(".toc-wrapper");0!==a.length&&(a.click(function(e){e.stopPropagation(),a.addClass("active")}),r(document).click(function(){return a.removeClass("active")}),a.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?d(e.target,0):"SPAN"===e.target.tagName&&d(e.target.parentElement,0),a.removeClass("active");var t=r(".s-toc");0<t.length&&t.removeClass("active")}),n=Array.from(a.find("li a")),l=(i=function(){return n.map(function(e){return Math.floor(r(e.getAttribute("href")).offset().top-s)})})(),c=r(document).height(),e=function(){var e=r("html").scrollTop()||r("body").scrollTop();if(r(document).height()!=c&&(e=r("html").scrollTop()||r("body").scrollTop(),c=r(document).height(),l=i()),l){for(var t=0,a=l.length-1,o=void 0;t<a;)l[o=t+a+1>>1]===e?t=a=o:l[o]<e?t=o:a=o-1;r(n).removeClass("active").eq(t).addClass("active")}},r(window).scroll(function(){e()}),t=null,r(window).bind("resize",function(){t&&clearTimeout(t),t=setTimeout(function(){l=i(),e()},100)}),e())}function u(){var e=r(".tabs");if(0!==e.length){for(var t=e.find(".nav-tabs .tab"),a=0;a<t.length;a++){var o=e.find(t[a].children[0]);o.addClass(o.attr("href")),o.removeAttr("href")}r(".tabs .nav-tabs").on("click","a",function(e){e.preventDefault(),e.stopPropagation();var t=r(e.target.parentElement.parentElement.parentElement);return t.find(".nav-tabs .active").removeClass("active"),t.find(e.target.parentElement).addClass("active"),t.find(".tab-content .active").removeClass("active"),t.find(r(e.target).attr("class")).addClass("active"),!1})}}c[0]&&(s=c[0].clientHeight+16),r(function(){var t,a,o;n(),i(),t=r(".l_header .switcher .s-search"),a=r(".l_header"),o=r(".l_header .m_search"),0!==t.length&&(t.click(function(e){a.toggleClass("z_search-open"),t.toggleClass("active"),o.find("input").focus()}),r(document).click(function(e){a.removeClass("z_search-open"),t.removeClass("active")}),o.click(function(e){e.stopPropagation()}),a.ready(function(){a.bind("keydown",function(e){if(9==e.keyCode)return!1;var t,a=!!document.all,o=a?(t=window.event.keyCode,window.event):(t=e.which,e);9==t&&(a?(o.keyCode=0,o.returnValue=!1):(o.which=0,o.preventDefault()))})})),l(),e(),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/img/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/img/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/img/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/img/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/img/"})),u(),r(".scroll-down").on("click",function(){d(".l_body")}),document.addEventListener("pjax:complete",function(){try{r(function(){s=80,(c=r(".l_header",".cover-wrapper"))[0]&&(s=c[0].clientHeight+16),n(),i(),l(),e(),u()})}catch(e){console.log(e)}})})}(jQuery),$("figcaption").click(function(){window.CodeBlockFullscreen?($("#post").removeClass("code-block-fullscreen"),$(this).parent().removeClass("code-block-fullscreen"),$(this).parent().removeClass("code-block-fullscreen-overflow-auto"),$("html").removeClass("code-block-fullscreen-html-scroll"),$(".highlight>table .gutter").removeClass("code-block-fullscreen-gutter"),window.CodeBlockFullscreen=!1):($("#post").addClass("code-block-fullscreen"),$(this).parent().addClass("code-block-fullscreen"),$(this).parent().addClass("code-block-fullscreen-overflow-auto"),$("html").addClass("code-block-fullscreen-html-scroll"),$(".highlight>table .gutter").addClass("code-block-fullscreen-gutter"),window.CodeBlockFullscreen=!0)}),setInterval("LogoChange()",1e3),window.location.hash&&(checkExist=setInterval(function(){"undefined"!=typeof jQuery&&$("#"+window.location.hash.split("#")[1]).length&&($("html, body").animate({scrollTop:$("#"+window.location.hash.split("#")[1]).offset().top-90},1e3),clearInterval(checkExist))},100));var titleTime,OriginTitle=document.title;document.addEventListener("visibilitychange",function(){document.hidden?($('[rel="shortcut icon"]').attr("href","https://cdn.jsdelivr.net/gh/MHuiG/blog-cdn@master/assets/favicon/Error.ico"),document.title="╭(°A°`)╮ 页面崩溃啦 ~",clearTimeout(titleTime)):($('[rel="shortcut icon"]').attr("href","https://cdn.jsdelivr.net/gh/MHuiG/blog-cdn@master/assets/favicon/favicon.ico"),document.title="(ฅ>ω<*ฅ) 噫又好了~"+OriginTitle,titleTime=setTimeout(function(){document.title=OriginTitle},2e3))});